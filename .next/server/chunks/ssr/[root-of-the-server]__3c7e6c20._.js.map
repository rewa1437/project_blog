{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/anupappasakornhiran/Desktop/project_blog/app/components/Navbar.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\n\nexport default function Navbar() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      const parsedUser = JSON.parse(storedUser);\n      setUser(parsedUser); \n\n      const fetchUserInfo = async () => {\n        try {\n          const userResponse = await fetch(`http://127.0.0.1:8000/get_user/?user_id=${parsedUser.user_id}`);\n          const userInfo = await userResponse.json();\n\n          const completeUserData = { ...parsedUser, ...userInfo };\n          console.log(completeUserData);\n          setUser(completeUserData);\n          setLoading(false);\n        } catch (error) {\n          console.error('Error fetching user info:', error);\n          setLoading(false);\n        }\n      };\n\n      fetchUserInfo();\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const handleLogout = () => {\n    localStorage.removeItem('user');\n    setUser(null);\n    window.location.reload();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen bg-gray-100\">\n        <p>Loading...</p>\n      </div>\n    );\n  }\n\n  const rankClass = user?.rank === 1 ? 'bg-gray-500' :\n                    user?.rank === 2 ? 'bg-blue-500' :\n                    user?.rank === 3 ? 'bg-green-500' :\n                    user?.rank === 4 ? 'bg-yellow-500' :\n                    'bg-gray-500';\n\n  return (\n    <nav className=\"bg-gray-800 text-white p-4 shadow-md\">\n      <div className=\"max-w-7xl mx-auto flex justify-between items-center space-x-6\">\n        <div className=\"font-bold text-xl\">MicroFinance</div>\n\n        <div className=\"flex items-center space-x-4\">\n          <Link href=\"/\">\n            <span className=\"cursor-pointer\">Home</span>\n          </Link>\n\n          <Link href=\"/blog\">\n            <span className=\"cursor-pointer\">Blog</span>\n          </Link>\n\n          <Link href=\"/donate_us\">\n            <span className=\"cursor-pointer\">Donate</span>\n          </Link>\n\n          {user ? (\n            <div className=\"flex items-center\">\n              <Link href=\"/profile\">\n                <div className={`${rankClass} text-white p-2 rounded-md cursor-pointer hover:scale-101 transition-all`}>\n                  {user.username}\n                </div>\n              </Link>\n              <Link href=\"/\">\n                <button\n                  className=\"ml-4 bg-red-600 text-white px-4 py-2 rounded-md hover:scale-101\"\n                  onClick={handleLogout}\n                >\n                  Logout\n                </button>\n              </Link>\n            </div>\n          ) : (\n            <Link href=\"/logins\">\n              <button className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-500\">\n                Login\n              </button>\n            </Link>\n          )}\n        </div>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,YAAY;YACd,MAAM,aAAa,KAAK,KAAK,CAAC;YAC9B,QAAQ;YAER,MAAM,gBAAgB;gBACpB,IAAI;oBACF,MAAM,eAAe,MAAM,MAAM,CAAC,wCAAwC,EAAE,WAAW,OAAO,EAAE;oBAChG,MAAM,WAAW,MAAM,aAAa,IAAI;oBAExC,MAAM,mBAAmB;wBAAE,GAAG,UAAU;wBAAE,GAAG,QAAQ;oBAAC;oBACtD,QAAQ,GAAG,CAAC;oBACZ,QAAQ;oBACR,WAAW;gBACb,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,6BAA6B;oBAC3C,WAAW;gBACb;YACF;YAEA;QACF,OAAO;YACL,WAAW;QACb;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,QAAQ,CAAC,MAAM;IACxB;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;0BAAE;;;;;;;;;;;IAGT;IAEA,MAAM,YAAY,MAAM,SAAS,IAAI,gBACnB,MAAM,SAAS,IAAI,gBACnB,MAAM,SAAS,IAAI,iBACnB,MAAM,SAAS,IAAI,kBACnB;IAElB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BAAoB;;;;;;8BAEnC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;sCAGnC,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;sCAGnC,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;wBAGlC,qBACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;8CACT,cAAA,8OAAC;wCAAI,WAAW,GAAG,UAAU,wEAAwE,CAAC;kDACnG,KAAK,QAAQ;;;;;;;;;;;8CAGlB,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;8CACT,cAAA,8OAAC;wCACC,WAAU;wCACV,SAAS;kDACV;;;;;;;;;;;;;;;;iDAML,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAO,WAAU;0CAAgE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAShG","debugId":null}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///Users/anupappasakornhiran/Desktop/project_blog/app/profile/page.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport Navbar from \"../components/Navbar\";\n\nexport default function Profile() {\n  const [userData, setUserData] = useState(null);\n  const [data_profile, setData] = useState('');\n  const [newUsername, setNewUsername] = useState('');\n  const [isSaving, setIsSaving] = useState(false);\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem('user');\n    if (storedUser) {\n      const parsedUser = JSON.parse(storedUser);\n      setUserData(parsedUser); \n    }\n  }, []);\n\n  useEffect(() => {\n    if (userData) {\n      const fetchUserData = async () => {\n        try {\n          const response = await fetch(`http://127.0.0.1:8000/get_user_all/?user_id=${userData.user_id}`);\n          const data = await response.json();\n          setData(data);\n        } catch (error) {\n          console.error(\"Error fetching user data:\", error);\n        }\n      };\n\n      fetchUserData();\n    }\n  }, [userData]);\n\n  const handleUsernameChange = (e) => {\n    setNewUsername(e.target.value);\n  };\n\n  const handleSaveUsername = async () => {\n    if (newUsername !== data_profile.username) {\n      setIsSaving(true);\n      try {\n        const response = await fetch(`http://127.0.0.1:8000/update_username/`, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            user_id: userData.user_id,\n            username: newUsername,\n          }),\n        });\n\n        const data = await response.json();\n        if (data.success) {\n          alert(\"เปลี่ยนชื่อเรียบร้อย\");\n          setData((prevData) => ({ ...prevData, username: newUsername }));\n          window.location.reload();\n        } else {\n          alert(\"ไม่มีการอัพเดท\");\n        }\n      } catch (error) {\n        console.error(\"Error updating username:\", error);\n        alert(\"Error updating username.\");\n      } finally {\n        setIsSaving(false);\n      }\n    } else {\n      alert(\"ไม่มีการอัพเดท\");\n    }\n  };\n  const handleDeleteUser = async () => {\n    if (window.confirm(\"Are you sure you want to delete your account?\")) {\n      try {\n        const response = await fetch(`http://127.0.0.1:8000/delete_user/`, {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            user_id: userData.user_id,\n          }),\n        });\n\n        const data = await response.json();\n        if (data.success) {\n          alert(\"User deleted successfully!\");\n          localStorage.removeItem('user');\n          window.location.href = \"/\";\n        } else {\n          alert(\"Failed to delete user.\");\n        }\n      } catch (error) {\n        console.error(\"Error deleting user:\", error);\n        alert(\"Error deleting user.\");\n      }\n    }\n  };  \n  \n  const rankClass = data_profile?.rank === 1 ? 'ผู้สนับสนุนระดับนักผจญภัย' :\n                    data_profile?.rank === 2 ? 'ผู้สนับสนุนระดับจอมยุทธ' :\n                    data_profile?.rank === 3 ? 'ผู้สนับสนุนระดับวีรบุรุษ' :\n                    data_profile?.rank === 4 ? 'ผู้สนับสนุนระดับตำนาน' :\n                    'ผู้สนับสนุนระดับนักผจญภัย';\n  return (\n    <div className=\"h-screen bg-gray-100 flex flex-col\">\n      <Navbar />\n      <div className=\"flex flex-grow items-center justify-center\">\n        <div className=\"container p-8 bg-white shadow-md rounded-lg max-w-sm w-full\">\n          <h1 className=\"text-3xl font-bold text-center text-green-600 mb-4\">My Account</h1>\n          \n          {data_profile ? (\n            <div>\n            <h2 className=\"text-xl font-semibold mb-2 text-center\">Account Details</h2>\n            \n            <div className=\"mb-4  items-center\">\n              <label htmlFor=\"username\" className=\"block text-lg font-semibold mb-2 mr-4\">Username:</label>\n              <input\n                type=\"text\"\n                id=\"username\"\n                className=\"w-full p-3 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500\"\n                value={newUsername} \n                onChange={handleUsernameChange}\n                placeholder={data_profile.username}  \n              />\n            </div>\n            \n            <p className=\"text-lg font-semibold mb-2\">Email</p><p className=\"text-lg  mb-2\">&emsp;{data_profile.email}</p>\n            <p className=\"text-lg font-semibold mb-4\">Rank</p><p className=\"text-lg  mb-2\">&emsp;{rankClass}</p>\n\n            <div className=\"mt-4 text-center flex space-x-4 items-center justify-center\">\n              <button\n                onClick={handleSaveUsername}\n                className={`bg-gray-600 text-white px-6 py-2 rounded-md ${isSaving ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\n                disabled={isSaving}\n              >\n                Save\n              </button>\n              <button\n                onClick={handleDeleteUser}\n                className={`bg-red-600 text-white px-6 py-2 rounded-md ${isSaving ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\n                disabled={isSaving}\n              >\n                Delete\n              </button>\n            </div>\n\n          </div>\n          ) : (\n            <p className=\"text-center text-gray-500\">Loading account details...</p>\n          )}\n        </div>\n      </div>\n      <footer className=\"text-center p-4 mt-8 text-gray-500 text-sm\">\n        © 2025, Microfinance\n      </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}