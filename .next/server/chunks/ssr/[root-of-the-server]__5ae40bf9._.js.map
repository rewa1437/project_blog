{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wanta/Downloads/project_blog/app/components/Navbar.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\nexport default function Navbar() {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isLogin, setlogin] =  useState(false);\r\n  const API_URL = process.env.API_URL || \"https://microfinance-backend-763l.onrender.com\";\r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('user');\r\n    if (storedUser) {\r\n      const parsedUser = JSON.parse(storedUser);\r\n      setUser(parsedUser); \r\n\r\n      const fetchUserInfo = async () => {\r\n        try {\r\n          const userResponse = await fetch(`${API_URL}/get_user/?user_id=${parsedUser.user_id}`);\r\n          const userInfo = await userResponse.json();\r\n\r\n          const completeUserData = { ...parsedUser, ...userInfo };\r\n          setUser(completeUserData);\r\n          setlogin(true);\r\n          setLoading(false);\r\n        } catch (error) {\r\n          console.error('Error fetching user info:', error);\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      fetchUserInfo();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user');\r\n    setUser(null);\r\n  };\r\n\r\n  const handleLoginfirst = () => {\r\n    alert(\"กรุณาล็อคอินก่อนเข้าสู่หน้าสนับสนุน\")\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-gray-100\">\r\n        <p>Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const rankClass = user?.rank === 1 ? 'bg-gray-500' :\r\n                    user?.rank === 2 ? 'bg-blue-500' :\r\n                    user?.rank === 3 ? 'bg-green-500' :\r\n                    user?.rank === 4 ? 'bg-yellow-500' :\r\n                    'bg-gray-500';\r\n\r\n  return (\r\n    <nav className=\"bg-gray-800 text-white p-4 shadow-md\">\r\n      <div className=\"max-w-7xl mx-auto flex justify-between items-center space-x-6\">\r\n        <div className=\"font-bold text-xl\">MicroFinance</div>\r\n\r\n        <div className=\"flex items-center space-x-4\">\r\n          <Link href=\"/\">\r\n            <span className=\"cursor-pointer\">Home</span>\r\n          </Link>\r\n\r\n          <Link href=\"/blog\">\r\n            <span className=\"cursor-pointer\">Blog</span>\r\n          </Link>\r\n          {isLogin ?(\r\n              <Link href=\"/donate_us\">\r\n                <span className=\"cursor-pointer\">Donate</span>\r\n              </Link>\r\n            ):(\r\n              <Link href=\"#\">\r\n                <span className=\"cursor-pointer\" onClick={handleLoginfirst}>Donate</span>\r\n              </Link>\r\n            )}\r\n\r\n          {user ? (\r\n            <div className=\"flex items-center\">\r\n              <Link href=\"/profile\">\r\n                <div className={`${rankClass} text-white p-2 rounded-md cursor-pointer hover:scale-101 transition-all`}>\r\n                  {user.username}\r\n                </div>\r\n              </Link>\r\n              <Link href=\"/\">\r\n                <button\r\n                  className=\"ml-4 bg-red-600 text-white px-4 py-2 rounded-md hover:scale-101\"\r\n                  onClick={handleLogout}\r\n                >\r\n                  Logout\r\n                </button>\r\n              </Link>\r\n            </div>\r\n          ) : (\r\n            <Link href=\"/logins\">\r\n              <button className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-500\">\r\n                Login\r\n              </button>\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,SAAS,GAAI,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACtC,MAAM,UAAU,sFAAuB;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,YAAY;YACd,MAAM,aAAa,KAAK,KAAK,CAAC;YAC9B,QAAQ;YAER,MAAM,gBAAgB;gBACpB,IAAI;oBACF,MAAM,eAAe,MAAM,MAAM,GAAG,QAAQ,mBAAmB,EAAE,WAAW,OAAO,EAAE;oBACrF,MAAM,WAAW,MAAM,aAAa,IAAI;oBAExC,MAAM,mBAAmB;wBAAE,GAAG,UAAU;wBAAE,GAAG,QAAQ;oBAAC;oBACtD,QAAQ;oBACR,SAAS;oBACT,WAAW;gBACb,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,6BAA6B;oBAC3C,WAAW;gBACb;YACF;YAEA;QACF,OAAO;YACL,WAAW;QACb;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,QAAQ;IACV;IAEA,MAAM,mBAAmB;QACvB,MAAM;IACR;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;0BAAE;;;;;;;;;;;IAGT;IAEA,MAAM,YAAY,MAAM,SAAS,IAAI,gBACnB,MAAM,SAAS,IAAI,gBACnB,MAAM,SAAS,IAAI,iBACnB,MAAM,SAAS,IAAI,kBACnB;IAElB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BAAoB;;;;;;8BAEnC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;sCAGnC,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;wBAElC,wBACG,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;iDAGnC,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;gCAAiB,SAAS;0CAAkB;;;;;;;;;;;wBAIjE,qBACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;8CACT,cAAA,8OAAC;wCAAI,WAAW,GAAG,UAAU,wEAAwE,CAAC;kDACnG,KAAK,QAAQ;;;;;;;;;;;8CAGlB,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;8CACT,cAAA,8OAAC;wCACC,WAAU;wCACV,SAAS;kDACV;;;;;;;;;;;;;;;;iDAML,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAO,WAAU;0CAAgE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAShG","debugId":null}}]
}