{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wanta/Downloads/project_blog/app/components/Navbar.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\n\r\nexport default function Navbar() {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isLogin, setlogin] =  useState(false);\r\n  const API_URL = process.env.API_URL || \"http://localhost:8000\";\r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('user');\r\n    if (storedUser) {\r\n      const parsedUser = JSON.parse(storedUser);\r\n      setUser(parsedUser); \r\n\r\n      const fetchUserInfo = async () => {\r\n        try {\r\n          const userResponse = await fetch(`${API_URL}/get_user/?user_id=${parsedUser.user_id}`);\r\n          const userInfo = await userResponse.json();\r\n\r\n          const completeUserData = { ...parsedUser, ...userInfo };\r\n          setUser(completeUserData);\r\n          setlogin(true);\r\n          setLoading(false);\r\n        } catch (error) {\r\n          console.error('Error fetching user info:', error);\r\n          setLoading(false);\r\n        }\r\n      };\r\n\r\n      fetchUserInfo();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user');\r\n    setUser(null);\r\n  };\r\n\r\n  const handleLoginfirst = () => {\r\n    alert(\"กรุณาล็อคอินก่อนเข้าสู่หน้าสนับสนุน\")\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-gray-100\">\r\n        <p>Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const rankClass = user?.rank === 1 ? 'bg-gray-500' :\r\n                    user?.rank === 2 ? 'bg-blue-500' :\r\n                    user?.rank === 3 ? 'bg-green-500' :\r\n                    user?.rank === 4 ? 'bg-yellow-500' :\r\n                    'bg-gray-500';\r\n\r\n  return (\r\n    <nav className=\"bg-gray-800 text-white p-4 shadow-md\">\r\n      <div className=\"max-w-7xl mx-auto flex justify-between items-center space-x-6\">\r\n        <div className=\"font-bold text-xl\">MicroFinance</div>\r\n\r\n        <div className=\"flex items-center space-x-4\">\r\n          <Link href=\"/\">\r\n            <span className=\"cursor-pointer\">Home</span>\r\n          </Link>\r\n\r\n          <Link href=\"/blog\">\r\n            <span className=\"cursor-pointer\">Blog</span>\r\n          </Link>\r\n          {isLogin ?(\r\n              <Link href=\"/donate_us\">\r\n                <span className=\"cursor-pointer\">Donate</span>\r\n              </Link>\r\n            ):(\r\n              <Link href=\"#\">\r\n                <span className=\"cursor-pointer\" onClick={handleLoginfirst}>Donate</span>\r\n              </Link>\r\n            )}\r\n\r\n          {user ? (\r\n            <div className=\"flex items-center\">\r\n              <Link href=\"/profile\">\r\n                <div className={`${rankClass} text-white p-2 rounded-md cursor-pointer hover:scale-101 transition-all`}>\r\n                  {user.username}\r\n                </div>\r\n              </Link>\r\n              <Link href=\"/\">\r\n                <button\r\n                  className=\"ml-4 bg-red-600 text-white px-4 py-2 rounded-md hover:scale-101\"\r\n                  onClick={handleLogout}\r\n                >\r\n                  Logout\r\n                </button>\r\n              </Link>\r\n            </div>\r\n          ) : (\r\n            <Link href=\"/logins\">\r\n              <button className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-500\">\r\n                Login\r\n              </button>\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,SAAS,GAAI,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACtC,MAAM,UAAU,6DAAuB;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,YAAY;YACd,MAAM,aAAa,KAAK,KAAK,CAAC;YAC9B,QAAQ;YAER,MAAM,gBAAgB;gBACpB,IAAI;oBACF,MAAM,eAAe,MAAM,MAAM,GAAG,QAAQ,mBAAmB,EAAE,WAAW,OAAO,EAAE;oBACrF,MAAM,WAAW,MAAM,aAAa,IAAI;oBAExC,MAAM,mBAAmB;wBAAE,GAAG,UAAU;wBAAE,GAAG,QAAQ;oBAAC;oBACtD,QAAQ;oBACR,SAAS;oBACT,WAAW;gBACb,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,6BAA6B;oBAC3C,WAAW;gBACb;YACF;YAEA;QACF,OAAO;YACL,WAAW;QACb;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,QAAQ;IACV;IAEA,MAAM,mBAAmB;QACvB,MAAM;IACR;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;0BAAE;;;;;;;;;;;IAGT;IAEA,MAAM,YAAY,MAAM,SAAS,IAAI,gBACnB,MAAM,SAAS,IAAI,gBACnB,MAAM,SAAS,IAAI,iBACnB,MAAM,SAAS,IAAI,kBACnB;IAElB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BAAoB;;;;;;8BAEnC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;sCAGnC,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;;wBAElC,wBACG,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;0CAAiB;;;;;;;;;;iDAGnC,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAK,WAAU;gCAAiB,SAAS;0CAAkB;;;;;;;;;;;wBAIjE,qBACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;8CACT,cAAA,8OAAC;wCAAI,WAAW,GAAG,UAAU,wEAAwE,CAAC;kDACnG,KAAK,QAAQ;;;;;;;;;;;8CAGlB,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;8CACT,cAAA,8OAAC;wCACC,WAAU;wCACV,SAAS;kDACV;;;;;;;;;;;;;;;;iDAML,8OAAC,4JAAA,CAAA,UAAI;4BAAC,MAAK;sCACT,cAAA,8OAAC;gCAAO,WAAU;0CAAgE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAShG","debugId":null}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wanta/Downloads/project_blog/app/donate_us/checkout/page.js"],"sourcesContent":["'use client'; \r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Navbar from '@/app/components/Navbar';\r\n\r\n\r\nexport default function Checkout() {\r\n  const [product, setProduct] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const API_URL = process.env.API_URL || \"http://localhost:8000\";\r\n\r\n  useEffect(() => {\r\n    const productId = localStorage.getItem(\"selectedProductId\"); \r\n\r\n    if (productId) {\r\n      const fetchProductData = async () => {\r\n        try {\r\n          const response = await fetch(`${API_URL}/get_product_details/${productId}/`);\r\n          const data = await response.json();\r\n          if (data.id) setProduct(data);\r\n          else throw new Error('Product not found');\r\n        } catch (error) {\r\n          setError(error.message);\r\n        }\r\n      };\r\n      fetchProductData();\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    const userId = storedUser?.user_id;\r\n\r\n    if (userId) {\r\n      const fetchUserInfo = async () => {\r\n        try {\r\n          const response = await fetch(`${API_URL}/get_user/?user_id=${userId}`);\r\n          const userInfo = await response.json();\r\n          setUser({ user_id: userId, ...userInfo });\r\n        } catch (error) {\r\n          console.error(\"Error fetching user info:\", error);\r\n        }\r\n      };\r\n      fetchUserInfo();\r\n    }\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!user?.user_id) {\r\n      alert(\"กรุณาเข้าสู่ระบบก่อนทำการบริจาค\");\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData(e.target);\r\n    const fullName = formData.get(\"fullname\");\r\n    const email = formData.get(\"email\");\r\n    const phone = formData.get(\"phone\");\r\n\r\n    try {\r\n      const donateRes = await fetch(`${API_URL}/add_donation/`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          user_id: user.user_id,\r\n          product_id: product.id,\r\n          amount: product.product_price,\r\n          note: `ชื่อ: ${fullName}, อีเมล: ${email}, เบอร์: ${phone}`,\r\n        }),\r\n      });\r\n\r\n      const donateData = await donateRes.json();\r\n\r\n      if (donateData.success) {\r\n        const newRank = product.product_rank;\r\n\r\n        if (newRank > user.rank) {\r\n          await fetch(`${API_URL}/update_rank/`, {\r\n            method: \"PUT\",\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n              user_id: user.user_id,\r\n              rank: newRank,\r\n            }),\r\n          });\r\n        }\r\n\r\n        alert(\"ขอบคุณสำหรับการบริจาค!\");\r\n        window.location.href = \"/\";\r\n      } else {\r\n        alert(\"เกิดข้อผิดพลาด: \" + donateData.message);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error submitting donation:\", error);\r\n      alert(\"ไม่สามารถทำรายการได้\");\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-gray-100\">\r\n        <p>{error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product || !user) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-gray-100\">\r\n        <p>Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const rankClass = product.product_rank === 1 ? 'ผู้สนับสนุนระดับนักผจญภัย ได้รับพื้นหลังโปรไฟล์เป็นสีเทา' :\r\n                    product.product_rank === 2 ? 'ผู้สนับสนุนระดับจอมยุทธ ได้รับพื้นหลังโปรไฟล์เป็นสีฟ้า' :\r\n                    product.product_rank === 3 ? 'ผู้สนับสนุนระดับวีรบุรุษ ได้รับพื้นหลังโปรไฟล์เป็นสีเขียว' :\r\n                    product.product_rank === 4 ? 'ผู้สนับสนุนระดับตำนาน ได้รับพื้นหลังโปรไฟล์เป็นสีเหลือง' :\r\n                    'ผู้สนับสนุนระดับนักผจญภัย ได้รับพื้นหลังโปรไฟล์เป็นสีเทา';\r\n\r\n  return (\r\n    <div className=\"h-auto\">\r\n      <Navbar />\r\n      <div className=\"p-8\">\r\n        <h1 className=\"text-4xl font-bold text-center\">Checkout</h1>\r\n\r\n        <div className=\"mt-8 flex gap-x-8\">\r\n\r\n          <div className=\"w-3/10\"></div>\r\n\r\n          <div className=\"w-4/10 p-6\">\r\n            <h3 className=\"text-2xl font-semibold\">Order Form</h3>\r\n            <form className=\"mt-4\" onSubmit={handleSubmit}>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium\">Full Name / กรอกชื่อ-นามสกุล</label>\r\n                <input name=\"fullname\" type=\"text\" className=\"w-full p-2 mt-1 border rounded-md\" placeholder=\"Enter your name\" required />\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium\">Email / อีเมล</label>\r\n                <input name=\"email\" type=\"email\" className=\"w-full p-2 mt-1 border rounded-md\" placeholder=\"Enter your email\" required/>\r\n              </div>\r\n              <div className=\"mb-4\">\r\n                <label className=\"block text-sm font-medium\">Phone Number / เบอร์โทรศัพท์</label>\r\n                <input name=\"phone\" type=\"tel\" className=\"w-full p-2 mt-1 border rounded-md\" placeholder=\"Enter your phone number\" required />\r\n              </div>\r\n              <div className=\"mt-8\">\r\n                <div className=\"flex gap-10\">\r\n                  <p className=\"font-semibold\">Total: {product.product_price} ฿</p>\r\n                  <button type=\"submit\" className=\"bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-500\">\r\n                    Confirm Donation\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n\r\n          <div className=\"w-3/10\"></div>\r\n        </div>\r\n      </div>\r\n      <footer className=\"text-center p-4 mt-8 text-gray-500 text-sm\">\r\n        © 2025, Microfinance\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}